///////////////////////////////////////////////////////////////////////////////
/// Includes
///////////////////////////////////////////////////////////////////////////////
#include "edit_date_dialog.h"

#include <QPushButton>
#include "calendar_dialog.h"
#include "ui_EditDateDialog.h"

namespace jccu
{

///////////////////////////////////////////////////////////////////////////////
/// Constructor.
///////////////////////////////////////////////////////////////////////////////
EditDateDialog::EditDateDialog(QWidget* parent)
  : QDialog(parent),
    ui_(new Ui::EditDateDialog)
{
  ui_->setupUi(this);
  ui_->dateEdit->setDate(QDate::currentDate());
  ui_->buttonBox->button(QDialogButtonBox::Cancel)->setDefault(true);
}


///////////////////////////////////////////////////////////////////////////////
/// Destructor.
///////////////////////////////////////////////////////////////////////////////
EditDateDialog::~EditDateDialog()
{
  delete ui_;
}


///////////////////////////////////////////////////////////////////////////////
/// Sets the text of the label.
///////////////////////////////////////////////////////////////////////////////
void EditDateDialog::setText(const QString& text)
{
  ui_->label->setText(text);
}


///////////////////////////////////////////////////////////////////////////////
/// Returns the chosen date.
///////////////////////////////////////////////////////////////////////////////
QDate EditDateDialog::selectedDate() const
{
  return ui_->dateEdit->date();
}


///////////////////////////////////////////////////////////////////////////////
/// Pops a calendar dialog for date selection.
///////////////////////////////////////////////////////////////////////////////
void EditDateDialog::on_toolButton_clicked()
{
  CalendarDialog calendar_dialog(this);
  calendar_dialog.setSelectedDate(ui_->dateEdit->date());

  if(calendar_dialog.exec() == QDialog::Accepted)
    ui_->dateEdit->setDate(calendar_dialog.selectedDate());
}

} // namespace jccu